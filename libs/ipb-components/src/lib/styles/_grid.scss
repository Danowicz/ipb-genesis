@use 'sass:map';

$grid-map: (

    // SMALL
    'sm': (
        'breakpoint': 0, // Mobile-first approach
        'columns': 4,
        'column-gap': 16,
        'grid-margin': 24
    ),

    // MEDIUM
    'md': (
        'breakpoint': 768,
        'columns': 8,
        'column-gap': 16,
        'grid-margin': 24
    ),

    // LARGE
    'lg': (
        'breakpoint': 1140,
        'columns': 12,
        'column-gap': 24,
        'grid-margin': 24
    )

);


@mixin define-grid($grid-map) {
    @each $size, $bp-map in $grid-map {

        $breakpoint: map.get($bp-map, 'breakpoint');
        $columns: map.get($bp-map, 'columns');
        $column-gap: map.get($bp-map, 'column-gap');
        $grid-margin: map.get($bp-map, 'grid-margin');

        @include declare-mq($breakpoint, 'min') {
            .ipb-grid {
              padding-inline: $grid-margin * 1px;
                &__row {
                  max-width: 1140px;
                  display: grid;
                  grid-template-columns: repeat($columns, 1fr);
                  grid-auto-flow: column;
                  column-gap: $column-gap * 1px;
                }

              @for $i from 1 through $columns {
                  /**
                   * * Breakpoint agnostic column size,
                   * * Breakpoint specific column size
                   */
                  &__col-#{$i},
                  &__col-#{$i}--#{$size} {
                      grid-column: span $i;
                  }

                  &__col-pos-#{$i}--#{$size} {
                    grid-column: $i;
                  }

                  &__col-right--#{$size} {
                    grid-column: $columns;
                  }

                  &__col-left--#{$size} {
                    grid-column: 1;
                  }

                  &__col-center--#{$size} {
                    grid-column: $columns / 2;
                  }
              }
            }
        }
    }
}


@mixin declare-mq($breakpoint, $min-or-max) {
    @media screen and (#{$min-or-max}-width: ($breakpoint * 1px)) {
        @content;
    }
}

@include define-grid($grid-map);
